<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Architecture Overview</title><link rel="stylesheet" type="text/css" href="static/docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="COMP_hack: The Definitive Guide" /><link rel="up" href="ch04.html" title="Chapter 4. Hacker's Guide" /><link rel="prev" href="ch04s02.html" title="Build System" /><link rel="next" href="ch04s04.html" title="Object Generator (objgen)" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Architecture Overview</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04s02.html">Prev</a> </td><th width="60%" align="center">Chapter 4. Hacker's Guide</th><td width="20%" align="right"> <a accesskey="n" href="ch04s04.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp46852518898480"></a>Architecture Overview</h2></div></div></div><p>The project is split into three main servers: lobby, world and channel. Accounts are tied to a single lobby. This lobby can then connect to multiple worlds. Each world has characters bound to it that share the same depository and demon compendium. Each world has several channels connected to it that can manage different zones and dungeon instances in the world. There is one main database for accounts used by the lobby and one world database for each configured world. These may point to the same or a different database server. They should never re-use the same database data as this could violate the assumption that the lobby or each world has exclusive access to the database. This could cause odd bugs and data corruption.</p><p>In addition to the main server applications there is dream, libobjgen, libcomp, libtester, a test client, unit test suites and several utilities. The main library libcomp is linked to all the servers, dream, the test client and most of the tools. It provides any common code that is used by at least two of these applications.</p><p>The objgen utility (and the libobjgen library it uses for metadata) are used to generate C++ classes that wrap data structures. These are generated for libcomp and all 3 server applications. The generated classes can load and save to binary, XML and a SQL database. This works for loading both the binary data format used by the client and custom data files. The C++ classes can also bind to the scripting language (squirrel).</p><p>For an in-depth discussion of different aspects of the code it's recommended you look at the <a class="ulink" href="https://comphack.github.io" target="_top">API documentation</a>. Most of what you need to know should be in there (or in this guide).</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch04s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Build System </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Object Generator (objgen)</td></tr></table></div></body></html>