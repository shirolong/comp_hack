<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Building from Source</title><link rel="stylesheet" type="text/css" href="static/docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="COMP_hack: The Definitive Guide" /><link rel="up" href="ch02.html" title="Chapter 2. Server Setup" /><link rel="prev" href="ch02s02.html" title="Linux Install &amp; Setup" /><link rel="next" href="ch02s04.html" title="Client Updater with Nginx" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Building from Source</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02s02.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Server Setup</th><td width="20%" align="right"> <a accesskey="n" href="ch02s04.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="idp46852521620928"></a>Building from Source</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idp46852517099248"></a>Windows</h3></div></div></div><p>
	This section of the guide will walk the user through building the server from source. The guide assumes the user wants to pull the source with Git for later modifications. There are many programs out there to help you use Git; however, GitKraken was selected for this guide. If you prefer a different choice, please adjust the instructions accordingly.
</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp46852518506432"></a>Prerequisites</h4></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="ulink" href="https://visualstudio.microsoft.com/vs/older-downloads/" target="_top">
		<em class="citetitle">Visual Studio 2015</em></a> (newer versions may be possible but have not been tested)</p></li><li class="listitem"><p><a class="ulink" href="https://www.gitkraken.com" target="_top">
		<em class="citetitle">GitKraken</em></a> (any Git client software will work)</p></li><li class="listitem"><p><a class="ulink" href="https://cmake.org" target="_top">
		<em class="citetitle">CMake</em></a></p></li><li class="listitem"><p><a class="ulink" href="https://www.qt.io" target="_top">
		<em class="citetitle">Qt5 Open Source</em></a> (<a class="ulink" href="https://www.qt.io/offline-installers" target="_top"><em class="citetitle">Offline Download</em></a>)</p></li></ul></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp46852518842224"></a>Visual Studio 2015</h4></div></div></div><p>
	It's very important that the user either install Visual Studio 2015 with the Visual C++ features or modify the install to add in these features. Without the support for C++ it is not possible to build the server. See <a class="xref" href="ch02s03.html#vs2015cpp" title="Figure 2.1. Installing Visual Studio 2015 with C++ support.">Figure 2.1</a> below for the options needed to enable C++ support.
</p><div class="figure"><a id="vs2015cpp"></a><p class="title"><strong>Figure 2.1. Installing Visual Studio 2015 with C++ support.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="static/vs2015cpp.png" alt="Installing Visual Studio 2015 with C++ support." /></div></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp46852515201568"></a>CMake</h4></div></div></div><p>
	When installing CMake it's very important to add it to the system path. The option to do this during install can be seen in <a class="xref" href="ch02s03.html#cmake" title="Figure 2.2. Installing CMake into the system path.">Figure 2.2</a>. This will be needed later during the build process.
</p><div class="figure"><a id="cmake"></a><p class="title"><strong>Figure 2.2. Installing CMake into the system path.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="static/cmake.png" alt="Installing CMake into the system path." /></div></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp46852517282480"></a>Qt5</h4></div></div></div><p>
	Some of the tools use Qt for the GUI (as it works on Windows, macOS and Linux). When installing Qt be sure to select the appropriate MSVC 2015 builds (at least 64-bit but 32-bit can be handy too). Be sure to check <span class="emphasis"><em>Qt WebEngine</em></span> or the updater will not build. These options can be seen in <a class="xref" href="ch02s03.html#qt" title="Figure 2.3. Qt5 install components.">Figure 2.3</a>.
</p><div class="figure"><a id="qt"></a><p class="title"><strong>Figure 2.3. Qt5 install components.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="static/qt.png" alt="Qt5 install components." /></div></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp46852514826496"></a>Checkout Sources</h4></div></div></div><p>
	If you plan to contribute to the project, fork the main project. This will commit all changes to your copy of the repository. Later these can be merged into the main project repository with a Pull Request. To fork, click the button seen in <a class="xref" href="ch02s03.html#fork_project" title="Figure 2.4. Forking the project.">Figure 2.4</a>. If you do not plan to contribute to the project, you may use the link for the main repository instead.
</p><div class="figure"><a id="fork_project"></a><p class="title"><strong>Figure 2.4. Forking the project.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="static/fork.png" alt="Forking the project." /></div></div></div><br class="figure-break" /><p>
	Once the project has been forked, start GitKraken and clone it from your GitHub account as seen in <a class="xref" href="ch02s03.html#clone1" title="Figure 2.5. Cloning a fork off GitHub.">Figure 2.5</a>.
</p><div class="figure"><a id="clone1"></a><p class="title"><strong>Figure 2.5. Cloning a fork off GitHub.</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="static/clone1.png" width="100%" alt="Cloning a fork off GitHub." /></td></tr></table></div></div></div><br class="figure-break" /><p>
	If you wish to clone the main repository instead, find the URL on the GitHub project page and enter it into GitKraken as shown below in <a class="xref" href="ch02s03.html#clone2" title="Figure 2.6. Getting the repository URL off GitHub.">Figure 2.6</a> and <a class="xref" href="ch02s03.html#clone3" title="Figure 2.7. Cloning the main project off GitHub.">Figure 2.7</a>.
</p><div class="figure"><a id="clone2"></a><p class="title"><strong>Figure 2.6. Getting the repository URL off GitHub.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="static/clone2.png" alt="Getting the repository URL off GitHub." /></div></div></div><br class="figure-break" /><div class="figure"><a id="clone3"></a><p class="title"><strong>Figure 2.7. Cloning the main project off GitHub.</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="static/clone3.png" width="100%" alt="Cloning the main project off GitHub." /></td></tr></table></div></div></div><br class="figure-break" /><p>
	Once the project is cloned you should see a window similar to <a class="xref" href="ch02s03.html#clone4" title="Figure 2.8. Project cloned in GitKraken.">Figure 2.8</a>.
</p><div class="figure"><a id="clone4"></a><p class="title"><strong>Figure 2.8. Project cloned in GitKraken.</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="static/clone4.png" width="100%" alt="Project cloned in GitKraken." /></td></tr></table></div></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp46852505303888"></a>Generate Project</h4></div></div></div><p>
	In the root of the project directory you should see two batch files called <span class="emphasis"><em>vsbuild_x86.bat</em></span> and <span class="emphasis"><em>vsbuild_x64.bat</em></span> for 32-bit and 64-bit respectively. These can be edited in a text editor. In this example the Qt5 directory had to be changed on the <span class="emphasis"><em>CMAKE_PREFIX_PATH</em></span> line for 32-bit:
</p><pre class="programlisting">
set CMAKE_PREFIX_PATH=C:\Qt\5.10.1\msvc2015
cmake -DCMAKE_CONFIGURATION_TYPES="Debug;Release" -G"Visual Studio 14 2015" ..
</pre><p>
	This also needed to be updated for 64-bit as well:
</p><pre class="programlisting">
set CMAKE_PREFIX_PATH=C:\Qt\5.10.1\msvc2015_64
cmake -DCMAKE_CONFIGURATION_TYPES="Debug;Release" -G"Visual Studio 14 2015 Win64" ..
</pre><p>
	Note that this path may very depending on which version of Qt5 was installed and to what location. Please look for the appropriate directory on your install. Run the appropriate batch file and you should get a dialog similar to the following:
</p><div class="figure"><a id="project_generation"></a><p class="title"><strong>Figure 2.9. Project generation with CMake.</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="static/project_generation.png" width="100%" alt="Project generation with CMake." /></td></tr></table></div></div></div><br class="figure-break" /><p>
	After the CMake generation the <span class="emphasis"><em>comp_hack.sln</em></span> solution file can be found in the <span class="emphasis"><em>build64</em></span> directory as shown in <a class="xref" href="ch02s03.html#build64" title="Figure 2.10. Project solution file in the build64 directory.">Figure 2.10</a>. The project can then be opened and built in Visual Studio 2015 as shown in <a class="xref" href="ch02s03.html#vssolution" title="Figure 2.11. Project opened in Visual Studio 2015.">Figure 2.11</a>.
</p><div class="figure"><a id="build64"></a><p class="title"><strong>Figure 2.10. Project solution file in the build64 directory.</strong></p><div class="figure-contents"><div class="mediaobject"><img src="static/build64.png" alt="Project solution file in the build64 directory." /></div></div></div><br class="figure-break" /><div class="figure"><a id="vssolution"></a><p class="title"><strong>Figure 2.11. Project opened in Visual Studio 2015.</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="90%"><tr><td><img src="static/vssolution.png" width="100%" alt="Project opened in Visual Studio 2015." /></td></tr></table></div></div></div><br class="figure-break" /></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch02s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Linux Install &amp; Setup </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Client Updater with Nginx</td></tr></table></div></body></html>